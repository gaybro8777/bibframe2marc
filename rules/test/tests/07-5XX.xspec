<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               stylesheet="../../../bibframe2marc.xsl"
               xslt-version="1.0">

  <!-- I know, a 490 isn't a 5XX -->
  <x:scenario label="MARC 490">
    <x:context href="../data/5XX/490.xml"/>
    <x:expect label="generate 490"
              test="count(//marc:datafield[@tag='490']) = 1"/>
    <x:expect label="ind1 default to '0'"
              test="//marc:datafield[@tag='490']/@ind1 = '0'"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='490']/@ind2 = ' '"/>
    <x:expect label="$a from seriesStatement"
              test="//marc:datafield[@tag='490']/marc:subfield[@code='a'][1] = 'A series of unfortunate events'"/>
    <x:expect label="$v from seriesEnumeration"
              test="//marc:datafield[@tag='490']/marc:subfield[@code='v'][2] = 'no 14'"/>
  </x:scenario>

  <x:scenario label="MARC 500">
    <x:context href="../data/5XX/500.xml"/>
    <x:expect label="generate 500" test="count(//marc:datafield[@tag='500']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 501">
    <x:context href="../data/5XX/501.xml"/>
    <x:expect label="generate 501" test="count(//marc:datafield[@tag='501']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='501'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='501'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='501'][1]/marc:subfield[@code='a'] = 'With: Peer Gynt (Suite) no. 1-2 / Edvard Grieg -- Till Eulenspiegels lustige Streiche / Richard Strauss.'"/>
  </x:scenario>

  <x:scenario label="MARC 502">
    <x:context href="../data/5XX/502.xml"/>
    <x:expect label="generate 502" test="count(//marc:datafield[@tag='502']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='502'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='502'][1]/@ind2 = ' '"/>
    <x:expect label="$b from degree"
              test="//marc:datafield[@tag='502'][1]/marc:subfield[@code='b'] = 'Ph.D'"/>
    <x:expect label="$c from grantingInstitution"
              test="//marc:datafield[@tag='502'][1]/marc:subfield[@code='c'] = 'University of Louisville'"/>
    <x:expect label="$d from date"
              test="//marc:datafield[@tag='502'][1]/marc:subfield[@code='d'] = '1997'"/>
  </x:scenario>

  <x:scenario label="MARC 505">
    <x:context href="../data/5XX/505.xml"/>
    <x:expect label="generate 505 from bf:tableOfContents property"
              test="count(//marc:datafield[@tag='505']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 506">
    <x:context href="../data/5XX/506.xml"/>
    <x:expect label="generate 506" test="count(//marc:datafield[@tag='506']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='506'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='506'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='506'][1]/marc:subfield[@code='a'] = 'Some restrictions apply. Consult restricted access file for restriction details'"/>
    <x:expect label="$u from rdfs:label with anyURI datatype"
              test="//marc:datafield[@tag='506'][1]/marc:subfield[@code='u'] = 'http://example.org/accessPolicy.html'"/>
    <x:expect label="$5 from applicableInstitution"
              test="//marc:datafield[@tag='506'][1]/marc:subfield[@code='5'] = 'MH'"/>
  </x:scenario>

  <x:scenario label="MARC 507">
    <x:context href="../data/5XX/507.xml"/>
    <x:expect label="generate 507 from scale property on Work" test="count(//marc:datafield[@tag='507']) = 1"/>
    <x:expect label="$a from note label"
              test="//marc:datafield[@tag='507'][1]/marc:subfield[@code='a'] = 'Scale 1:10 of the original'"/>
  </x:scenario>

  <x:scenario label="MARC 508">
    <x:context href="../data/5XX/508.xml"/>
    <x:expect label="generate 508" test="count(//marc:datafield[@tag='508']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='508'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='508'][1]/@ind2 = ' '"/>
    <x:expect label="$a from credits"
              test="//marc:datafield[@tag='508'][1]/marc:subfield[@code='a'] = 'Producer, Joseph N. Ermolieff ; director, Lesley Selander ; screenplay, Theodore St. John ; music director, Michel Michelet.'"/>
  </x:scenario>

  <x:scenario label="MARC 510">
    <x:context href="../data/5XX/510.xml"/>
    <x:expect label="generate 510" test="count(//marc:datafield[@tag='510']) = 1"/>
    <x:expect label="ind1 from class of property"
              test="//marc:datafield[@tag='510'][1]/@ind1 = '2'"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='510'][1]/@ind2 = ' '"/>
    <x:expect label="$a from title"
              test="//marc:datafield[@tag='510'][1]/marc:subfield[@code='a'] = 'Index Medicus'"/>
    <x:expect label="$b from coverage note"
              test="//marc:datafield[@tag='510'][1]/marc:subfield[@code='b'] = 'v1n1, 1984-'"/>
    <x:expect label="$x from Issn"
              test="//marc:datafield[@tag='510'][1]/marc:subfield[@code='x'] = '0019-3879'"/>
  </x:scenario>

  <x:scenario label="MARC 511">
    <x:context href="../data/5XX/511.xml"/>
    <x:expect label="generate 511 from bf:credits property with 'Cast:' display constant"
              test="//marc:datafield[@tag='511']/marc:subfield[@code='a'] = 'Maggie Smith, Dame Judi Dench, Tom Wilkinson, Bill Nighy.'"/>
  </x:scenario>

  <x:scenario label="MARC 513">
    <x:context href="../data/5XX/513.xml"/>
    <x:expect label="generate 513" test="count(//marc:datafield[@tag='513']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='513'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='513'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='513'][1]/marc:subfield[@code='a'] = 'Quarterly technical progress report; Jan.-Apr. 1, 1977.'"/>
  </x:scenario>

  <x:scenario label="MARC 515">
    <x:context href="../data/5XX/515.xml"/>
    <x:expect label="generate 515" test="count(//marc:datafield[@tag='515']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='515'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='515'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='515'][1]/marc:subfield[@code='a'] = 'Issues for &lt;1980-1986&gt; called: &lt;2. Aufl.-5. Aufl.&gt;'"/>
  </x:scenario>

  <x:scenario label="MARC 516">
    <x:context href="../data/5XX/516.xml"/>
    <x:expect label="generate 516" test="count(//marc:datafield[@tag='516']) = 1"/>
    <x:expect label="ind1 default to '8'"
              test="//marc:datafield[@tag='516'][1]/@ind1 = '8'"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='516'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='516'][1]/marc:subfield[@code='a'] = 'Computer programs.'"/>
  </x:scenario>

  <x:scenario label="MARC 518">
    <x:context href="../data/5XX/518.xml"/>
    <x:expect label="generate 518" test="count(//marc:datafield[@tag='518']) = 1"/>
    <x:expect label="ind1 default to blank"
              test="//marc:datafield[@tag='518'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 default to blank"
              test="//marc:datafield[@tag='518'][1]/@ind2 = ' '"/>
    <x:expect label="$a from rdfs:label"
              test="//marc:datafield[@tag='518'][1]/marc:subfield[@code='a'] = 'Recorded in Vienna in 1961, previously released as WST 17035.'"/>
    <x:expect label="$3 from bflc:appliesTo"
              test="//marc:datafield[@tag='518'][1]/marc:subfield[@code='3'] = 'Horse'"/>
  </x:scenario>

  <x:scenario label="MARC 520">
    <x:context href="../data/5XX/520.xml"/>
    <x:expect label="generate 520 from bf:summary property"
              test="//marc:datafield[@tag='520']/marc:subfield[@code='a'] = 'Following the yearly tradition, this release will feature an array of Grammy-nominated artists. The bestselling collection includes categories representing nominees for Record of the Year, Album of the Year, Song of the Year, and more.'"/>
  </x:scenario>

  <x:scenario label="MARC 525">
    <x:context href="../data/5XX/525.xml"/>
    <x:expect label="generate 525" test="count(//marc:datafield[@tag='525']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 538">
    <x:context href="../data/5XX/538.xml"/>
    <x:expect label="generate 538 from bf:systemRequirement property"
              test="//marc:datafield[@tag='538']/marc:subfield[@code='a'] = 'Blu-ray disc; requires Blu-ray player.'"/>
  </x:scenario>

</x:description>
