<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               stylesheet="../../../bibframe2marc.xsl"
               xslt-version="1.0">

  <x:scenario label="MARC 100">
    <x:context href="../data/1XX/100.xml"/>
    <x:expect label="generate 100" test="count(//marc:datafield[@tag='100']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 130">
    <x:context href="../data/1XX/130.xml"/>
    <x:expect label="generate 130 from Work title when Instance title doesn't match Work title and there is no bflc:PrimaryContribution" test="count(//marc:datafield[@tag='130']) = 1"/>
    <x:expect label="ind1 generated when bflc:titleSortKey is shorter than label" test="//marc:datafield[@tag='130']/@ind1 = '0'"/>
    <x:expect label="$a generated from mainTitle" test="//marc:datafield[@tag='130']/marc:subfield[@code='a'] = 'Morning call (San Francisco, Calif.)'"/>
  </x:scenario>

</x:description>
