<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               stylesheet="../../../bibframe2marc.xsl"
               xslt-version="1.0">

  <x:scenario label="MARC 300">
    <x:context href="../data/3XX/300.xml"/>
    <x:expect label="generate 300" test="count(//marc:datafield[@tag='300']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 306">
    <x:context href="../data/3XX/306.xml"/>
    <x:expect label="Each bf:duration property of the Instance generates a 306"
              test="count(//marc:datafield[@tag='306']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 310-321">
    <x:context href="../data/3XX/310-321.xml"/>
    <x:expect label="First bf:frequency property of the Instances generates a 310"
              test="//marc:datafield[@tag='310']/marc:subfield[@code='a'] = 'daily'"/>
    <x:expect label="Subsequent bf:frequency properties generate 321s"
              test="//marc:datafield[@tag='321'][1]/marc:subfield[@code='a'] = 'weekly'"/>
    <x:expect label="bf:date property of bf:Frequency generates $b"
              test="//marc:datafield[@tag='321'][1]/marc:subfield[@code='b'] = '1970-1985'"/>
  </x:scenario>

  <x:scenario label="MARC 336">
    <x:context href="../data/3XX/336.xml"/>
    <x:expect label="generate 336" test="count(//marc:datafield[@tag='336']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 337">
    <x:context href="../data/3XX/337.xml"/>
    <x:expect label="generate 337" test="count(//marc:datafield[@tag='337']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 338">
    <x:context href="../data/3XX/338.xml"/>
    <x:expect label="generate 338" test="count(//marc:datafield[@tag='338']) = 1"/>
  </x:scenario>

  <x:scenario label="MARC 340">
    <x:context href="../data/3XX/340.xml"/>
    <x:expect label="generate 340"
              test="//marc:datafield[@tag='340']/marc:subfield[@code='a'] = 'plastic, metal'"/>
    <x:expect label="bf:source property generates $2"
              test="//marc:datafield[@tag='340']/marc:subfield[@code='2'] = 'rda'"/>
  </x:scenario>

  <x:scenario label="MARC 344">
    <x:context href="../data/3XX/344.xml"/>
    <x:expect label="generate 344 from each matching bf:soundCharacteristic property"
              test="count(//marc:datafield[@tag='344']) = 7"/>
  </x:scenario>

</x:description>
