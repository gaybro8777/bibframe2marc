<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               stylesheet="../../../bibframe2marc.xsl"
               xslt-version="1.0">

  <x:scenario label="MARC 600">
    <x:context href="../data/6XX/600.xml"/>
    <x:expect label="generate 600" test="count(//marc:datafield[@tag='600']) = 3"/>
    <x:expect label="ind1 generated from class of bf:Agent"
              test="//marc:datafield[@tag='600'][1]/@ind1 = '1'"/>
    <x:expect label="ind2 generated from bf:source"
              test="//marc:datafield[@tag='600'][2]/@ind2 = '0'"/>
    <x:expect label="$a can be generated from name label"
              test="//marc:datafield[@tag='600'][1]/marc:subfield[@code='a'] = 'Obama, Barack.'"/>
    <x:expect label="$t from title of bf:subject/bf:Work"
              test="//marc:datafield[@tag='600'][2]/marc:subfield[@code='t'] = 'Faust.'"/>
    <x:expect label="parse subdivisions"
              test="//marc:datafield[@tag='600'][3]/marc:subfield[@code='v'] = 'Interviews'"/>
  </x:scenario>

  <x:scenario label="MARC 610">
    <x:context href="../data/6XX/610.xml"/>
    <x:expect label="generate 610"
              test="count(//marc:datafield[@tag='610']) = 3"/>
    <x:expect label="ind1 generated from class of bf:Agent"
              test="//marc:datafield[@tag='610'][1]/@ind1 = '1'"/>
    <x:expect label="ind2 generated from bf:source"
              test="//marc:datafield[@tag='610'][3]/@ind2 = '2'"/>
    <x:expect label="first madsrdf:NameElement in $a"
              test="//marc:datafield[@tag='610'][1]/marc:subfield[@code='a'] = 'New York Academy of Medicine.'"/>
    <x:expect label="subsequent NameElement in $b"
              test="//marc:datafield[@tag='610'][1]/marc:subfield[@code='b'] = 'Library'"/>
    <x:expect label="generate subdivisions"
              test="//marc:datafield[@tag='610'][1]/marc:subfield[@code='v'] = 'Periodicals'"/>
  </x:scenario>

  <x:scenario label="MARC 611">
    <x:context href="../data/6XX/611.xml"/>
    <x:expect label="generate 611"
              test="count(//marc:datafield[@tag='611']) = 1"/>
    <x:expect label="ind1 default to '2'"
              test="//marc:datafield[@tag='611']/@ind1 = '2'"/>
    <x:expect label="ind2 generated from bf:source"
              test="//marc:datafield[@tag='611']/@ind2 = '0'"/>
    <x:expect label="$a generated from label or from first elementList value"
              test="//marc:datafield[@tag='611']/marc:subfield[@code='a'] = 'Codex Book Fair and Symposium.'"/>
    <x:expect label="$c generated from GeographicElement"
              test="//marc:datafield[@tag='611']/marc:subfield[@code='c'] = 'Minneapolis, MN'"/>
  </x:scenario>

  <x:scenario label="MARC 651">
    <x:context href="../data/6XX/651.xml"/>
    <x:expect label="generation 651"
              test="count(//marc:datafield[@tag='651']) = 2"/>
    <x:expect label="ind1 default to ' '"
              test="//marc:datafield[@tag='651'][1]/@ind1 = ' '"/>
    <x:expect label="ind2 generated from bf:source"
              test="//marc:datafield[@tag='651'][2]/@ind2 = '7'"/>
    <x:expect label="$a generated from first element in componentList or label"
              test="//marc:datafield[@tag='651'][1]/marc:subfield[@code='a'] = 'Maryland'"/>
    <x:expect label="subdivisions generated from subsequent elements in componentList"
              test="//marc:datafield[@tag='651'][1]/marc:subfield[@code='x'] = 'Antiquities'"/>
  </x:scenario>

  <x:scenario label="MARC 650">
    <x:context href="../data/6XX/650.xml"/>
    <x:expect label="generate 650" test="count(//marc:datafield[@tag='650']) = 3"/>
    <x:expect label="parse subdivisions" test="//marc:datafield[@tag='650'][1]/marc:subfield[@code='x']='Security measures'"/>
  </x:scenario>

</x:description>
